<!DOCTYPE html>
{% load static %}
<html lang="de">
    <head>
        <link rel="stylesheet" href="static/css/bootstrap.min.css">
        <link rel="stylesheet" href="static/css/style.css">
        <style>
            @page {
                size: A4;
                margin: 1cm;
                @frame footer {
                    -pdf-frame-content: footerContent;
                    bottom: 0cm;
                    margin-left: 9cm;
                    margin-right: 9cm;
                    height: 0.7cm;
                }
               }
        </style>
    </head>
    <body>

        <h1>
            Rollen und Arbeitsplatzfunktionen
            {{ ueberschrift }}
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            Stand: {{ stand }}
        </h1>

        {% if rollenMenge %}
            {% for rolle in rollenMenge %}
                <div>
                    <table repeat="0" id="RolleUndAF">
                        <thead>
                            <tr>
                                <th colspan="2" style="text-align: left;"><br />Rollennname</th>
                                <th colspan="2" style="text-align: left;"><br />Beschreibung</th>
                                <th colspan="1" style="text-align: left;"><br />System</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>&nbsp;</td></tr>
                            <tr>
                                <td colspan="2">
                                    {{ rolle.rollenname }}
                                </td>
                                <td colspan="2">
                                    {{ rolle.rollenbeschreibung }}
                                </td>
                                <td colspan="1">
                                    {{ rolle.system }}
                                </td>
                            </tr>
                            <tr>
                                <td>&nbsp;</td>
                                <td colspan="4">
                                    <table repeat="0" id="pdfdruck2">
                                        <thead>
                                            <tr>
                                                <td width="30%"><strong>AF</strong></td>
                                                <td width="5%"><strong>Muss</strong></td>
                                                <td width="15%"><strong>Einsatz</strong></td>
                                                <td width="50%"><strong>Anmerkung zur AF</strong></td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for meineaf in rolle.tblrollehataf_set.all %}
                                                {% if forloop.counter0 > 0 and forloop.counter0|divisibleby:45 %}
													</tbody>
												</table>
											</td>
										</tr>
									</tbody>
								</table>

								<table repeat="0" id="pdfdruck">
									<tr>
										<td>&nbsp;</td>
										<td colspan="4">
											<table repeat="1" id="pdfdruck2">
												<thead>
													<tr>
														<td width="30%"><strong>AF</strong></td>
														<td width="5%"><strong>Muss</strong></td>
														<td width="15%"><strong>Einsatz</strong></td>
														<td width="50%"><strong>Anmerkung zur AF</strong></td>
													</tr>
												</thead>
												<tbody>
												{% endif %}
													<tr>
														<td>{{ meineaf.af }}</td>
														<td class="text-center">
															{% if meineaf.mussfeld %}
																<img src="static/checkbox-checked.jpg"
																	 alt="checkbox checked" height="10" width="10">
															{% else %}
																<img src="static/checkbox-blank.jpg"
																	 alt="checkbox checked" height="10" width="10">
															{% endif %}
														</td>
														<td class="text-center">
															<small>{{ meineaf.get_einsatz_display }}</small>
														</td>
														<td>{{ meineaf.bemerkung }}</td>
													</tr>
												{% empty %}
													<tr>
														<td class="text-danger">
															Dieser Rolle sind keine Arbeitsplatzfunktionen zugeordnet
														</td>
													</tr>
												{% endfor rolle.tblrollehataf_set.all %}
											</tbody>
										</table>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
					<p>&nbsp</p>
			{% endfor RollenMenge %}
		{% else %}
			<div class="text-danger">
				<p>
					Keine Rollen gefunden
				</p>
			</div>
		{% endif %}

		{% if tf_menge %}
			{% comment hier geht die Liste der TFen los, die ist aber noch falsch %}{% endcomment %}
			<h1>Liste der Arbeitsplatzfunktionen und ihrer Technischen Funktionen (TF)</h1>
			<div>
				<table repeat="0" id="TF">
					<thead>
						<tr>
							<th width="5%" style="text-align: left">Name</th>
							<th width="54%" style="text-align: left">Beschreibung</th>
							<th width="8%" style="text-align: left">TF Kriti- kalit채t</th>
							<th width="15%" style="text-align: left">Eigent체mer Orga</th>
							<th width="10%" style="text-align: left">Plattform</th>
							<th width="8%" style="text-align: left">Direct Connect</th>
						</tr>
					</thead>
					<tbody>
						{% for tf in tf_menge|dictsort:"tf" %}
							{% if forloop.counter0 > 0 and forloop.counter0|divisibleby:45 %}
									</tbody>
								</table>
								<table repeat="0" id="TF">
									<thead>
										<tr>
											<th width="5%" style="text-align: left">Name</th>
											<th width="54%" style="text-align: left">Beschreibung</th>
											<th width="8%" style="text-align: left">TF Kriti- kalit채t</th>
											<th width="15%" style="text-align: left">Eigent체mer Orga</th>
											<th width="10%" style="text-align: left">Plattform</th>
											<th width="8%" style="text-align: left">Direct Connect</th>
										</tr>
									</thead>
									<tbody>
							{% endif %}
							<tr>
								<td>{{ tf.tf }}</td>
							</tr>
							<tr><td>&nbsp;</td>
								<td>{{ tf.tf_beschreibung }}</td>
								<td>{{ tf.tf_kritikalitaet }}</td>
								<td>{{ tf.tf_eigentuemer_org }}</td>
								<td>{{ tf.plattform__tf_technische_plattform }}</td>
								<td>{{ tf.direct_connect }}</td>
							</tr>
						{% empty %}
							<div class="text-danger">
								<p>
									Keine TF-Menge gefunden
								</p>
							</div>
						{% endfor tf_menge %}
					</tbody>
				</table>
				<hr />
			</div>
		{% endif %}


		{% comment hier geht die RACF - Liste los %}{% endcomment %}

		{% if racf_liste %}
			<h1>Liste der RACF-Profile der genutzten TFen</h1>
			<div id="RACF_{{ g.group }}">
				<p style="font-size:10px; margin: 1px;">
					TF &nbsp;
					Class &nbsp;
					Test &nbsp;
					Prod &nbsp;
					Type &nbsp;
					Profile &nbsp;
					Access
				</p>
				{% for g in racf_liste|dictsort:"group" %}
					{% ifchanged g.group %}<p style="font-size:3px; margin: 0px;">&nbsp;</p>{% endifchanged %}
					<p style="font-size:6px; line-height:90%; margin: 0px;">
						{{ g.group }} &nbsp;
						{{ g.ressource_class }} &nbsp;
						{{ g.test }} &nbsp;
						{{ g.produktion }} &nbsp;
						{{ g.alter_control_update }} &nbsp;
						{{ g.type }}
						{{ g.profil }} &nbsp;
						{{ g.access }} &nbsp;
					</p>
				{% endfor racf_liste %}
				<hr />
			</div>
		{% endif %}
		<div id="footerContent">
			{% block page_foot %}
				Page <pdf:pagenumber>
			{% endblock %}
		</div>
    </body>
</html>
